{"changed":true,"filter":false,"title":"favorites_controller.rb","tooltip":"/app/controllers/favorites_controller.rb","value":"class FavoritesController < ApplicationController\n\n  def create\n    @topic = Topic.find(params[:topic_id])\n    @post = @topic.posts.find(params[:post_id])\n    favorite = current_user.favorites.build(post: @post)\n\n    authorize favorite\n    if favorite.save\n      flash[:notice] = \"Favorited post\"\n      redirect_to [@topic, @post]\n    else\n      flash[:error] = \"Unable to add favorite. Please try again.\"\n      redirect_to [@topic, @post]\n    end\n  end\n\n  def destroy\n    @topic = Topic.find(params[:topic_id])\n    @post = @topic.posts.find(params[:post_id])\n    favorite = current_user.favorites.find(params[:id])\n\n    authorize favorite\n    if favorite.destroy\n      flash[:notice] = \"Removed favorite\"\n      redirect_to [@topic, @post]\n    else\n      flash[:error] = \"Unable to remove favorite. Please try again.\"\n      redirect_to [@topic, @post]\n    end\n  end\nend\n","undoManager":{"mark":-2,"position":-1,"stack":[[{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"insert","lines":["t"],"id":7}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["s"],"id":6}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":[" "],"id":5}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["t"],"id":4}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["i"],"id":3}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["g"],"id":2}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1427698852000}